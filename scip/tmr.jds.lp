\ This file was automatically generated by Zimpl
\ set Period      := { 1, 2 };
\ set Group       := { 1, 2 };
\ set Cow         := { 1, 2, 3, 4 };
\ set Nutrient    := { "energy", "protein" };
\ set CowAttr     := Nutrient + { "intake", "no" };
\ set Feed        := { "grasssilage", "maizesilage", "wheat", "soy" };
\ set FeedAttr    := Nutrient + { "fill", "rnb" };
\ set Concentrate := { "wheat", "soy" };
\ param need[Period * Group * Cow  * CowAttr] :=                 |"energy", "protein", "intake", "no"|       |1,1,1| 111    ,  
\ 2399    ,  15.25  ,  10 |   |1,1,2| 110    ,  2330    ,  16.91  ,  10 |    |1,2,3|  99    ,  2135    ,  16.60  ,  10 |   |1,2
\ ,4|  97    ,  2097    ,  16.23  ,  10 |   |2,1,1| 108    ,  2274    ,  17.20  ,  10 |   |2,1,2| 103    ,  2198    ,  16.95  ,
\   10 |   |2,2,3|  95    ,  2070    ,  15.58  ,  10 |   |2,2,4|  95    ,  2069    ,  15.42  ,  10 | default 0;
\ param feed[Feed * FeedAttr] :=                                 |"energy", "protein", "fill", "rnb"|       |"grasssilage"| 5.9
\     ,  135    ,  0.914 ,  6   |   |"maizesilage"| 6.9    ,  136    ,  0.962 ,  -9  |   |      "wheat"| 8.5    ,  170    ,  0.
\ 400 ,  -5  |   |        "soy"| 9.9    ,  250    ,  0.400 ,  24  |;
\ param max_conc_pc := 0.4;
\ param cows_per_gr := 2;
\ var x_m[Period * Group * Cow * Nutrient];
\ var x_p[Period * Group * Cow * Nutrient];
\ var y[Period * Group * Feed];
\ maximize satisfaction: sum <t> in Period: sum <i> in Group: sum <l> in Cow: sum <k> in Nutrient    with need[t,i,l,"no"] > 0:
\  - need[t,i,l,"no"] * (x_m[t,i,l,k] + x_p[t,i,l,k]);
\ subto nutrients: forall <t,i,l,k> in Period * Group * Cow * Nutrient   with need[t,i,l,"no"] > 0:    need[t,i,l,"intake"] / (
\ (sum <lx> in Cow: need[t,i,lx,"intake"]) / cows_per_gr) *    sum <j> in Feed: y[t,i,j] * feed[j,k] / need[t,i,l,k] + x_m[t,i,
\ l,k] - x_p[t,i,l,k] == 1;
\ subto intake: forall <t,i> in Period * Group:    sum <j> in Feed: y[t,i,j] * feed[j,"fill"] == sum <l> in Cow: need[t,i,l,"in
\ take"] / cows_per_gr;
\ subto rnb: forall <t,i,l> in Period * Group * Cow   with need[t,i,l,"no"] > 0:   0 <= need[t,i,l,"intake"] / ((sum <lx> in Co
\ w: need[t,i,lx,"intake"]) / cows_per_gr) * sum <j> in Feed: y[t,i,j] * feed[j,"rnb"] <= 50;
\ subto concentrates: forall <t,i> in Period * Group:   sum <j> in Concentrate: (1 - max_conc_pc) / max_conc_pc * y[t,i,j] -   
\  sum <j> in Feed \ Concentrate: y[t,i,j] <= 0;
\ subto maizesilage: sum <t,i,l,j> in Period * Group * Cow * Feed    with j == "maizesilage" and need[t,i,l,"no"] > 0:   need[t
\ ,i,l,"no"] * y[t,i,j] * need[t,i,l,"intake"] / ((sum <lx> in Cow: need[t,i,lx,"intake"]) / cows_per_gr)  <= 300;
\Problem name: tmr.jds.zpl
Maximize
 satisfaction:  -10 x_m#1#1#1$energy -10 x_m#1#1#1$protein -10 x_m#1#1#2$energy -10 x_m#1#1#2$protein -10 x_m#1#2#3$energy -10 x_m#1#2#3$protein
  -10 x_m#1#2#4$energy -10 x_m#1#2#4$protein -10 x_m#2#1#1$energy -10 x_m#2#1#1$protein -10 x_m#2#1#2$energy -10 x_m#2#1#2$protein
  -10 x_m#2#2#3$energy -10 x_m#2#2#3$protein -10 x_m#2#2#4$energy -10 x_m#2#2#4$protein -10 x_p#1#1#1$energy -10 x_p#1#1#1$protein
  -10 x_p#1#1#2$energy -10 x_p#1#1#2$protein -10 x_p#1#2#3$energy -10 x_p#1#2#3$protein -10 x_p#1#2#4$energy -10 x_p#1#2#4$protein
  -10 x_p#2#1#1$energy -10 x_p#2#1#1$protein -10 x_p#2#1#2$energy -10 x_p#2#1#2$protein -10 x_p#2#2#3$energy -10 x_p#2#2#3$protein
  -10 x_p#2#2#4$energy -10 x_p#2#2#4$protein
Subject to
 nutrients_;energy_1_1_1;@0:
  - x_p#1#1#1$energy + x_m#1#1#1$energy +0.0845855183541751 y#1#1$soy +0.0726239299000493 y#1#1$wheat +0.0589535430953341 y#1#1$maizesilage +0.0504095513423872 y#1#1$grasssilage
  = 1
 nutrients_;protein_1_1_1;@1:
  - x_p#1#1#1$protein + x_m#1#1#1$protein +0.0988310842618919 y#1#1$soy +0.0672051372980865 y#1#1$wheat +0.0537641098384692 y#1#1$maizesilage +0.0533687855014216 y#1#1$grasssilage
  = 1
 nutrients_;energy_2_1_1;@2:
  - x_p#1#1#2$energy + x_m#1#1#2$energy +0.0946455223880597 y#1#1$soy +0.0812613071008593 y#1#1$wheat +0.0659650610583446 y#1#1$maizesilage +0.0564049072817729 y#1#1$grasssilage
  = 1
 nutrients_;protein_2_1_1;@3:
  - x_p#1#1#2$protein + x_m#1#1#2$protein +0.112834432985288 y#1#1$soy +0.0767274144299959 y#1#1$wheat +0.0613819315439968 y#1#1$maizesilage +0.0609305938120556 y#1#1$grasssilage
  = 1
 nutrients_;energy_3_2_1;@4:
  - x_p#1#2#3$energy + x_m#1#2#3$energy +0.101127017971368 y#1#2$soy +0.0868262275511742 y#1#2$wheat +0.0704824670709532 y#1#2$maizesilage +0.0602676167708151 y#1#2$grasssilage
  = 1
 nutrients_;protein_3_2_1;@5:
  - x_p#1#2#3$protein + x_m#1#2#3$protein +0.118415711910267 y#1#2$soy +0.0805226840989813 y#1#2$wheat +0.064418147279185 y#1#2$maizesilage +0.0639444844315439 y#1#2$grasssilage
  = 1
 nutrients_;energy_4_2_1;@6:
  - x_p#1#2#4$energy + x_m#1#2#4$energy +0.10091160021479 y#1#2$soy +0.0866412729116881 y#1#2$wheat +0.0703323274224292 y#1#2$maizesilage +0.0601392364916424 y#1#2$grasssilage
  = 1
 nutrients_;protein_4_2_1;@7:
  - x_p#1#2#4$protein + x_m#1#2#4$protein +0.11787432287629 y#1#2$soy +0.0801545395558774 y#1#2$wheat +0.0641236316447019 y#1#2$maizesilage +0.0636521343531968 y#1#2$grasssilage
  = 1
 nutrients_;energy_1_1_2;@8:
  - x_p#2#1#1$energy + x_m#2#1#1$energy +0.0923377257198633 y#2#1$soy +0.0792798655170544 y#2#1$wheat +0.0643565967138441 y#2#1$maizesilage +0.0550295537118378 y#2#1$grasssilage
  = 1
 nutrients_;protein_1_1_2;@9:
  - x_p#2#1#1$protein + x_m#2#1#1$protein +0.110743254641237 y#2#1$soy +0.0753054131560411 y#2#1$wheat +0.0602443305248329 y#2#1$maizesilage +0.0598013575062679 y#2#1$grasssilage
  = 1
 nutrients_;energy_2_1_2;@a:
  - x_p#2#1#2$energy + x_m#2#1#2$energy +0.0954128701189782 y#2#1$soy +0.0819201410112439 y#2#1$wheat +0.0664998791738333 y#2#1$maizesilage +0.0568622155254517 y#2#1$grasssilage
  = 1
 nutrients_;protein_2_1_2;@b:
  - x_p#2#1#2$protein + x_m#2#1#2$protein +0.112907115079994 y#2#1$soy +0.076776838254396 y#2#1$wheat +0.0614214706035168 y#2#1$maizesilage +0.0609698421431969 y#2#1$grasssilage
  = 1
 nutrients_;energy_3_2_2;@c:
  - x_p#2#2#3$energy + x_m#2#2#3$energy +0.104748387096774 y#2#2$soy +0.0899354838709677 y#2#2$wheat +0.0730064516129032 y#2#2$maizesilage +0.0624258064516129 y#2#2$grasssilage
  = 1
 nutrients_;protein_3_2_2;@d:
  - x_p#2#2#3$protein + x_m#2#2#3$protein +0.121396291101761 y#2#2$soy +0.0825494779491974 y#2#2$wheat +0.0660395823593579 y#2#2$maizesilage +0.0655539971949509 y#2#2$grasssilage
  = 1
 nutrients_;energy_4_2_2;@e:
  - x_p#2#2#4$energy + x_m#2#2#4$energy +0.103672665534805 y#2#2$soy +0.0890118845500849 y#2#2$wheat +0.0722567062818336 y#2#2$maizesilage +0.0617847198641766 y#2#2$grasssilage
  = 1
 nutrients_;protein_4_2_2;@f:
  - x_p#2#2#4$protein + x_m#2#2#4$protein +0.120207673958122 y#2#2$soy +0.0817412182915231 y#2#2$wheat +0.0653929746332185 y#2#2$maizesilage +0.064912143937386 y#2#2$grasssilage
  = 1
 intake_;1_1;@10:
  +0.4 y#1#1$soy +0.4 y#1#1$wheat +0.962 y#1#1$maizesilage +0.914 y#1#1$grasssilage = 16.08
 intake_;2_1;@11:
  +0.4 y#1#2$soy +0.4 y#1#2$wheat +0.962 y#1#2$maizesilage +0.914 y#1#2$grasssilage = 16.415
 intake_;1_2;@12:
  +0.4 y#2#1$soy +0.4 y#2#1$wheat +0.962 y#2#1$maizesilage +0.914 y#2#1$grasssilage = 17.075
 intake_;2_2;@13:
  +0.4 y#2#2$soy +0.4 y#2#2$wheat +0.962 y#2#2$maizesilage +0.914 y#2#2$grasssilage = 15.5
 rnb_;1_1_1;@14R:
  +22.7611940298507 y#1#1$soy -4.74191542288557 y#1#1$wheat -8.53544776119403 y#1#1$maizesilage +5.69029850746269 y#1#1$grasssilage <= 50
 rnb_;1_1_1;@14L:
  +22.7611940298507 y#1#1$soy -4.74191542288557 y#1#1$wheat -8.53544776119403 y#1#1$maizesilage +5.69029850746269 y#1#1$grasssilage >= 0
 rnb_;2_1_1;@15R:
  +25.2388059701493 y#1#1$soy -5.25808457711443 y#1#1$wheat -9.46455223880597 y#1#1$maizesilage +6.30970149253731 y#1#1$grasssilage <= 50
 rnb_;2_1_1;@15L:
  +25.2388059701493 y#1#1$soy -5.25808457711443 y#1#1$wheat -9.46455223880597 y#1#1$maizesilage +6.30970149253731 y#1#1$grasssilage >= 0
 rnb_;3_2_1;@16R:
  +24.2704843131282 y#1#2$soy -5.05635089856838 y#1#2$wheat -9.10143161742309 y#1#2$maizesilage +6.06762107828206 y#1#2$grasssilage <= 50
 rnb_;3_2_1;@16L:
  +24.2704843131282 y#1#2$soy -5.05635089856838 y#1#2$wheat -9.10143161742309 y#1#2$maizesilage +6.06762107828206 y#1#2$grasssilage >= 0
 rnb_;4_2_1;@17R:
  +23.7295156868718 y#1#2$soy -4.94364910143162 y#1#2$wheat -8.89856838257691 y#1#2$maizesilage +5.93237892171794 y#1#2$grasssilage <= 50
 rnb_;4_2_1;@17L:
  +23.7295156868718 y#1#2$soy -4.94364910143162 y#1#2$wheat -8.89856838257691 y#1#2$maizesilage +5.93237892171794 y#1#2$grasssilage >= 0
 rnb_;1_1_2;@18R:
  +24.1756954612006 y#2#1$soy -5.03660322108346 y#2#1$wheat -9.06588579795022 y#2#1$maizesilage +6.04392386530015 y#2#1$grasssilage <= 50
 rnb_;1_1_2;@18L:
  +24.1756954612006 y#2#1$soy -5.03660322108346 y#2#1$wheat -9.06588579795022 y#2#1$maizesilage +6.04392386530015 y#2#1$grasssilage >= 0
 rnb_;2_1_2;@19R:
  +23.8243045387994 y#2#1$soy -4.96339677891654 y#2#1$wheat -8.93411420204978 y#2#1$maizesilage +5.95607613469985 y#2#1$grasssilage <= 50
 rnb_;2_1_2;@19L:
  +23.8243045387994 y#2#1$soy -4.96339677891654 y#2#1$wheat -8.93411420204978 y#2#1$maizesilage +5.95607613469985 y#2#1$grasssilage >= 0
 rnb_;3_2_2;@1aR:
  +24.1238709677419 y#2#2$soy -5.0258064516129 y#2#2$wheat -9.04645161290322 y#2#2$maizesilage +6.03096774193548 y#2#2$grasssilage <= 50
 rnb_;3_2_2;@1aL:
  +24.1238709677419 y#2#2$soy -5.0258064516129 y#2#2$wheat -9.04645161290322 y#2#2$maizesilage +6.03096774193548 y#2#2$grasssilage >= 0
 rnb_;4_2_2;@1bR:
  +23.8761290322581 y#2#2$soy -4.9741935483871 y#2#2$wheat -8.95354838709677 y#2#2$maizesilage +5.96903225806452 y#2#2$grasssilage <= 50
 rnb_;4_2_2;@1bL:
  +23.8761290322581 y#2#2$soy -4.9741935483871 y#2#2$wheat -8.95354838709677 y#2#2$maizesilage +5.96903225806452 y#2#2$grasssilage >= 0
 concentrates_;1_1;@1c:
  - y#1#1$maizesilage - y#1#1$grasssilage +1.5 y#1#1$soy +1.5 y#1#1$wheat <= 0
 concentrates_;2_1;@1d:
  - y#1#2$maizesilage - y#1#2$grasssilage +1.5 y#1#2$soy +1.5 y#1#2$wheat <= 0
 concentrates_;1_2;@1e:
  - y#2#1$maizesilage - y#2#1$grasssilage +1.5 y#2#1$soy +1.5 y#2#1$wheat <= 0
 concentrates_;2_2;@1f:
  - y#2#2$maizesilage - y#2#2$grasssilage +1.5 y#2#2$soy +1.5 y#2#2$wheat <= 0
 maizesilage_:
  +20 y#2#2$maizesilage +20 y#2#1$maizesilage +20 y#1#2$maizesilage +20 y#1#1$maizesilage <= 300
Bounds
 0 <= x_m#1#1#1$energy <= +inf
 0 <= x_m#1#1#1$protein <= +inf
 0 <= x_m#1#1#2$energy <= +inf
 0 <= x_m#1#1#2$protein <= +inf
 0 <= x_m#1#2#3$energy <= +inf
 0 <= x_m#1#2#3$protein <= +inf
 0 <= x_m#1#2#4$energy <= +inf
 0 <= x_m#1#2#4$protein <= +inf
 0 <= x_m#2#1#1$energy <= +inf
 0 <= x_m#2#1#1$protein <= +inf
 0 <= x_m#2#1#2$energy <= +inf
 0 <= x_m#2#1#2$protein <= +inf
 0 <= x_m#2#2#3$energy <= +inf
 0 <= x_m#2#2#3$protein <= +inf
 0 <= x_m#2#2#4$energy <= +inf
 0 <= x_m#2#2#4$protein <= +inf
 0 <= x_p#1#1#1$energy <= +inf
 0 <= x_p#1#1#1$protein <= +inf
 0 <= x_p#1#1#2$energy <= +inf
 0 <= x_p#1#1#2$protein <= +inf
 0 <= x_p#1#2#3$energy <= +inf
 0 <= x_p#1#2#3$protein <= +inf
 0 <= x_p#1#2#4$energy <= +inf
 0 <= x_p#1#2#4$protein <= +inf
 0 <= x_p#2#1#1$energy <= +inf
 0 <= x_p#2#1#1$protein <= +inf
 0 <= x_p#2#1#2$energy <= +inf
 0 <= x_p#2#1#2$protein <= +inf
 0 <= x_p#2#2#3$energy <= +inf
 0 <= x_p#2#2#3$protein <= +inf
 0 <= x_p#2#2#4$energy <= +inf
 0 <= x_p#2#2#4$protein <= +inf
 0 <= y#1#1$grasssilage <= +inf
 0 <= y#1#1$maizesilage <= +inf
 0 <= y#1#1$wheat <= +inf
 0 <= y#1#1$soy <= +inf
 0 <= y#1#2$grasssilage <= +inf
 0 <= y#1#2$maizesilage <= +inf
 0 <= y#1#2$wheat <= +inf
 0 <= y#1#2$soy <= +inf
 0 <= y#2#1$grasssilage <= +inf
 0 <= y#2#1$maizesilage <= +inf
 0 <= y#2#1$wheat <= +inf
 0 <= y#2#1$soy <= +inf
 0 <= y#2#2$grasssilage <= +inf
 0 <= y#2#2$maizesilage <= +inf
 0 <= y#2#2$wheat <= +inf
 0 <= y#2#2$soy <= +inf
End
